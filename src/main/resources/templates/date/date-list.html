<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M" crossorigin="anonymous">
    <title>Events list</title>
    <style>
        table {
            border-spacing: 0;
            width: 100%;
            border: 1px solid #ddd;
        }

        th {
            cursor: pointer;
        }

        th, td {
            text-align: left;
            padding: 16px;
        }

        tr:nth-child(even) {
            background-color: #f2f2f2
        }
    </style>
</head>
<body>
<nav class="navbar navbar-expand-sm bg-primary navbar-dark">
    <div class="container-fluid">
        <ul class="navbar-nav">
            <li class="nav-item">
                <a class="nav-link active" th:href="@{/}">Index</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" th:href="@{/character/all}">List</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#" th:href="@{/character/create}"> Character Creation </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#" th:href="@{/calendar/dashboard}"> Calendar </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#" th:href="@{/date/dashboard}"> Events </a>
            </li>
        </ul>
    </div>
</nav>

<script>
    function rowClicked(value) {
        location.href = "/date/" + value;
    }
    function sortTable(n) {
        var table, rows, switching, i, x, y, shouldSwitch, dir, switchcount = 0;
        table = document.getElementById("myTable");
        switching = true;
        //Set the sorting direction to ascending:
        dir = "asc";
        /*Make a loop that will continue until
        no switching has been done:*/
        while (switching) {
            //start by saying: no switching is done:
            switching = false;
            rows = table.rows;
            /*Loop through all table rows (except the
            first, which contains table headers):*/
            for (i = 1; i < (rows.length - 1); i++) {
                //start by saying there should be no switching:
                shouldSwitch = false;
                /*Get the two elements you want to compare,
                one from current row and one from the next:*/
                x = rows[i].getElementsByTagName("SORT")[n];
                y = rows[i + 1].getElementsByTagName("SORT")[n];
                /*check if the two rows should switch place,
                based on the direction, asc or desc:*/
                if (dir === "asc") {
                    if (x.innerHTML > y.innerHTML) {
                        //if so, mark as a switch and break the loop:
                        shouldSwitch= true;
                        break;
                    }
                } else if (dir === "desc") {
                    if (x.innerHTML < y.innerHTML) {
                        //if so, mark as a switch and break the loop:
                        shouldSwitch = true;
                        break;
                    }
                }
            }
            if (shouldSwitch) {
                /*If a switch has been marked, make the switch
                and mark that a switch has been done:*/
                rows[i].parentNode.insertBefore(rows[i + 1], rows[i]);
                switching = true;
                //Each time a switch is done, increase this count by 1:
                switchcount ++;
            } else {
                /*If no switching has been done AND the direction is "asc",
                set the direction to "desc" and run the while loop again.*/
                if (switchcount === 0 && dir === "asc") {
                    dir = "desc";
                    switching = true;
                }
            }
        }
    }
</script>
<h1>All Events</h1>
<table class="table table-hover link" id="myTable">
    <thead>
    <tr>
        <th></th>
        <th onclick="sortTable(0)">Date</th>
        <th>Name</th>
        <th>Description</th>
        <th>Year</th>
        <th onclick="sortTable(1)">Month</th>
<!--        <th>Week</th>-->
        <th onclick="sortTable(2)">Day</th>
        <th></th>
        <th></th>
        <th></th>
        <th></th>
    </tr>
    </thead>
    <tbody>
    <tr th:if="${dates.empty}">
        <td colspan="2"> No Events Available</td>
    </tr>
    <tr th:each="item : ${dates}"
        th:onclick="'javascript:rowClicked(\'' + ${item.id} + '\');'">
        <td><a hidden th:text="${item.id}"></a></td>
        <td><a th:text="${item.shortForm}"></a></td>
        <td><a th:text="${item.name}"></a></td>
        <td><a th:text="${item.description}"></a></td>
        <td><sort><a th:text="${item.years}"></a></sort></td>
        <td><sort><a th:text="${item.months}"></a></sort></td>
<!--        <td><a th:text="${item.weeks}"></a></td>-->
        <td><sort><a th:text="${item.days}"></a></sort></td>
        <td><a th:text="${item.hours}"></a></td>
        <td><a th:text="${item.minutes}"></a></td>
        <td><a th:text="${item.type}"></a></td>
        <!--        this works -->
        <td><a th:href="@{/date/edit/{id}(id=${item.id})}">Edit</a></td>
        <td><a th:href="@{/date/delete/{id}(id=${item.id})}">Delete</a></td>
    </tr>
    </tbody>
</table>
</body>
</html>





